function CssLoader(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(b)};function Inputter(a){var b=a.text(),d=new StyleCopier(a,["height","width"]);a.text("");a.append(Inputter.inputElement);var c=a.find("input");c.val(b);d.apply(c);c.click(function(a){a.stopPropagation()});c.blur(function(){var a=c.parent(),b=c.val();c.remove();a.html(b)});asPlain(c).focus()}Inputter.inputElement='<input class="inputter" name="inputter" type="text" value="@original text@">';$||alert('You must include JQuery to run WizzyWig. Consider adding this to the top of your HTML:\n<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"><\/script>');$(document).ready(function(){new CssLoader(cssUrl());new WizzyWig(new Saver,WizzyWig.editableElements)});function Saver(){function a(){$("body").append('<div id="saverSandbox" class="hidden">'+$("body").html()+"</div>");$("#saverSandbox .editable").each(function(){$(this).removeClass("editable")});var a=$("#saverSandbox").html().replace(/ class=\"\"/g,"");$("#saverSandbox").remove();return a}var b=this;this.contents=function(){var b=a();return"<html><head>"+$("head").html()+"</head><body>"+b+"</body></html>"};this.save=function(a){var c="data:application/octet-stream,"+encodeURIComponent(b.contents());
window.open(c,"Save");a.stopPropagation();a.preventDefault()}};function StyleCopier(a,b){var d=$.map(b,function(b){return{styleName:b,styleValue:a.css(b)}});this.apply=function(a){$.each(d,function(b,d){a.css(d.styleName,d.styleValue)})}};function asPlain(a){return a[0]}function exists(a){if("undefined"===typeof a)return!1;if(!a.size)throw"Not a JQuery object";return 0<a.size()}function WizzyWig(a,b){$("body").append(WizzyWig.console);$("#wizzywigConsole .save").click(function(){a.save()});$(b).each(function(){$(this).addClass("editable");$(this).click(function(){new Inputter($(this));$("#wizzywigConsole").hasClass("hidden")&&$("#wizzywigConsole").removeClass("hidden")})})}WizzyWig.console='<div id="wizzywigConsole" class="hidden"><button class="save">Save</button></div>';
WizzyWig.editableElements="td, h1, h2, p";function cssUrl(){return $('script[src*="izzy"]').first().attr("src").replace(/main\/javascript\/.*/g,"main/css/wizzywig.css")};
